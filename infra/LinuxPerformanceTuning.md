# Linux パフォーマンスチューニング
### Jason R.Fink, Matthew D.Sherer 共著　岡田長治 監修
### ISBN4-274-06469-7

- P.3 パフォーマンスチューニングには以下の2種類がある
  - プロアクティブ（事前予防型）
  - リアクティブ（事後対応型）
- P.6 よく調整されたシステムは一般に安定している。例えば、システム必要なドライバだけを持つカーネルは、通常にインストールされたカーネルよりも遥かに堅牢である
- P.8 不要なサービスがLinux システムで実行されるという状況において非常に重要なのは、そのようなサービスの殆どが、監視されないサービスであるということである。これは、セキュリティにおいて深刻で驚異的である。不要なサービスを停止させることで、システムのパフォーマンスだけでなく、セキュリティも向上する。
- P.19 プロセススケジューリングとの対話は、nice コマンド、またはnice とsetpriority システムコールを使っておこなう。
- P.20 （参考）goodness カーネルコール
- P.23 さまざまな理由からシステムと一緒にライブラリを保持しない場合、これを解決するには、一般には2通りの方法がある。1つは、ライブラリの位置に関するリンカのリスト（/etc/ld.so.confにある）にライブラリが存在するディレクトリを追加し、 `/sbin/ldconfig` あるいは `/sbin/ldconfig -v |less` を実行する。2つ目の方法は環境変数LD_LIBRARY_PATH を定義することである。
- P.24 （参考）LD_PRELOAD はLD_LIBRARY_PATH と同じ方法で使うことができるが、最初にローヅするライブラリを指定できる点がことなる。
- P.28 緊急的に通常ファイルをスワップとして使用する場合
```
# dd if=/dev/zero of=/tmp/swapfile bs=1M count=2048
# mkswap /tmp/swapfile
# swapon /tmp/swapfile
```
- P.39 ランタイムキューは常にCPU 数以下であることが最適である。これは、キューに実行を待っているプロセスがないことを意味する。この値が大きい時は、負荷を異なるマシンに分散するか、プロセッサをアップグレードする必要がある。
- P.46 何をどの順序でチェックすべきかわからない場合には、次に示す大まかな順序を参考にすると良い
  - CPU -- 何がいつCPU を使っているか。明らかな乱用はないか
  - メモリ -- さまざまな用途における負荷に関して、システムでメモリの乱用はないか
  - スワップ -- 当然、コレはメモリと対話するが、時間ごとのスワップ使用状況のレベルに注意せよ
  - I/O サブシステム -- IDE やSCSI バス、アプリケーションが依存するインターフェースなど、関連する全I/O サブシステムのしようレベルに注意せよ
  - アプリケーション設定 -- 前述したように、環境やアプリケーションの構成方法について知っておくことは非常に重要である。最終的には、これらがボトルネックの原因になっている場合が多い。
P.61 vmstat の読み方
  - r : wait 以外の動作をしていない実行待ち状態のプロセス数
  - b : 最後の更新からスリープモードになったままのプロセス数
  - swpd : 使用中の物理、または仮想メモリの送料お
  - free : 利用可能な物理メモリの寮
  - buff : 測定中にバッファリングされていたメモリ
  - cache : 使用中のキャッシュ
  - si : スワップ領域からメモリに返されたメモリの量
  - so : ディスクにスワップされたメモリの量
  - bi : ディスクデバイスに送信されたディスクブロック数/秒
  - bo : ディスクデバイスから受信したディスクブロック数/秒
  - in : CPU クロックを含む毎秒の割り込み数
  - cs : カーネル内での毎秒のコンテキストスイッチ数
  - us : ユーザープロセスに費やされたCPU サイクルの割合
  - sy : システムプロセスに費やされたCPU サイクルの割合
  - id : CPU が何もしていない場合の未使用のCPU サイクルまたはアイドル時間の割合
P.70 （参考）mingetty とは？


